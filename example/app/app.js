!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _app=require("./app.html"),_app2=_interopRequireDefault(_app),_app3=require("./app.controller"),_app4=_interopRequireDefault(_app3),appComponent={restrict:"E",bindings:{},controller:_app4.default,template:_app2.default,controllerAs:"vm"};exports.default=appComponent},{"./app.controller":2,"./app.html":3}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var appController=function appController($interval){_classCallCheck(this,appController);var self=this;this.black={gaugeRadius:140,minVal:0,maxVal:1e3,needleVal:Math.round(200),tickSpaceMinVal:10,tickSpaceMajVal:100,divID:"gaugeBox",gaugeUnits:"Kmh",tickColMaj:"#F5F7FA",tickColMin:"#F5F7FA",outerEdgeCol:"#434A54",pivotCol:"#DA4453",innerCol:"#000",unitsLabelCol:"#E9573F",tickLabelCol:"#F5F7FA",needleCol:"#DA4453",defaultFonts:""},this.cool={gaugeRadius:140,minVal:0,maxVal:1e3,needleVal:Math.round(700),tickSpaceMinVal:10,tickSpaceMajVal:100,divID:"gaugeBox",gaugeUnits:"Kmh"},this.classic={gaugeRadius:140,minVal:0,maxVal:1e3,needleVal:Math.round(700),tickSpaceMinVal:10,tickSpaceMajVal:100,divID:"gaugeBox",gaugeUnits:"Kmh",tickColMaj:"#656D78",tickColMin:"#656D78",outerEdgeCol:"#CCD1D9",pivotCol:"#434A54",innerCol:"#E6E9ED",unitsLabelCol:"#656D78",tickLabelCol:"#656D78",needleCol:"#434A54",defaultFonts:""},$interval(function(){self.classic.needleVal=Math.round(1e3*Math.random())},2e3)};appController.$inject=["$interval"],exports.default=appController},{}],3:[function(require,module,exports){module.exports='<div class=container-fluid><div class=row><div class=col-md-4><div class="panel panel-default"><div class=panel-heading>Default</div><div class=panel-body><div class=text-center><meter-gauge gaugeconfig=vm.cool></meter-gauge></div></div></div></div><div class=col-md-4><div class="panel panel-default"><div class=panel-heading>Red Black</div><div class=panel-body><div class=text-center><meter-gauge gaugeconfig=vm.black></meter-gauge></div></div></div></div><div class=col-md-4><div class="panel panel-default"><div class=panel-heading>Classic(with real time update)</div><div class=panel-body><div class=text-center><meter-gauge gaugeconfig=vm.classic></meter-gauge></div></div></div></div></div></div>'},{}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _metergauge=require("./components/metergauge/metergauge"),_metergauge2=_interopRequireDefault(_metergauge),_app=require("./app.component"),_app2=_interopRequireDefault(_app);angular.module("app",[_metergauge2.default.name]).component("app",_app2.default).config(function(){})},{"./app.component":1,"./components/metergauge/metergauge":6}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _metergauge=require("./metergauge.link"),_metergauge2=_interopRequireDefault(_metergauge),meterGaugeComponent=function(){return{restrict:"E",scope:{gaugeconfig:"="},link:_metergauge2.default}};exports.default=meterGaugeComponent},{"./metergauge.link":7}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _metergauge=require("./metergauge.component"),_metergauge2=_interopRequireDefault(_metergauge),meterGaugeModule=angular.module("meterGauge",[]).directive("meterGauge",_metergauge2.default);exports.default=meterGaugeModule},{"./metergauge.component":5}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var meterGaugeComponentLink=function(scope,element,attrs){var element=element[0],config=scope.gaugeconfig;if(!config)return void console.error("No config found");var meterGauge=function(d3){function drawGauge(opt){function labelXcalc(d,i){var tickAngle=d+90,tickAngleRad=dToR(tickAngle),labelW=opt.labelFontSize/(tickLabelText[i].toString().length/2),x1=originX+(labelStart-labelW)*Math.cos(tickAngleRad);return x1}function labelYcalc(d,i){var tickAngle=d+90,tickAngleRad=dToR(tickAngle),y1=originY+labelStart*Math.sin(tickAngleRad)+opt.labelFontSize/2;return y1}if("undefined"==typeof opt)var opt={};"undefined"==typeof opt.gaugeRadius&&(opt.gaugeRadius=150),"undefined"==typeof opt.minVal&&(opt.minVal=0),"undefined"==typeof opt.maxVal&&(opt.maxVal=100),"undefined"==typeof opt.tickSpaceMinVal&&(opt.tickSpaceMinVal=1),"undefined"==typeof opt.tickSpaceMajVal&&(opt.tickSpaceMajVal=10),"undefined"==typeof opt.divID&&(opt.divID="vizBox"),"undefined"==typeof opt.needleVal&&(opt.needleVal=60),"undefined"==typeof opt.gaugeUnits&&(opt.gaugeUnits="%"),"undefined"==typeof opt.padding&&(opt.padding=.05),"undefined"==typeof opt.edgeWidth&&(opt.edgeWidth=.05),"undefined"==typeof opt.tickEdgeGap&&(opt.tickEdgeGap=.05),"undefined"==typeof opt.tickLengthMaj&&(opt.tickLengthMaj=.15),"undefined"==typeof opt.tickLengthMin&&(opt.tickLengthMin=.05),"undefined"==typeof opt.needleTickGap&&(opt.needleTickGap=.05),"undefined"==typeof opt.needleLengthNeg&&(opt.needleLengthNeg=.2),"undefined"==typeof opt.pivotRadius&&(opt.pivotRadius=.1),"undefined"==typeof opt.ticknessGaugeBasis&&(opt.ticknessGaugeBasis=200),"undefined"==typeof opt.needleWidth&&(opt.needleWidth=5),"undefined"==typeof opt.tickWidthMaj&&(opt.tickWidthMaj=3),"undefined"==typeof opt.tickWidthMin&&(opt.tickWidthMin=1),"undefined"==typeof opt.labelFontSize&&(opt.labelFontSize=18),"undefined"==typeof opt.zeroTickAngle&&(opt.zeroTickAngle=60),"undefined"==typeof opt.maxTickAngle&&(opt.maxTickAngle=300),"undefined"==typeof opt.zeroNeedleAngle&&(opt.zeroNeedleAngle=40),"undefined"==typeof opt.maxNeedleAngle&&(opt.maxNeedleAngle=320),"undefined"==typeof opt.tickColMaj&&(opt.tickColMaj="#0099CC"),"undefined"==typeof opt.tickColMin&&(opt.tickColMin="#000"),"undefined"==typeof opt.outerEdgeCol&&(opt.outerEdgeCol="#0099CC"),"undefined"==typeof opt.pivotCol&&(opt.pivotCol="#999"),"undefined"==typeof opt.innerCol&&(opt.innerCol="#fff"),"undefined"==typeof opt.unitsLabelCol&&(opt.unitsLabelCol="#000"),"undefined"==typeof opt.tickLabelCol&&(opt.tickLabelCol="#000"),"undefined"==typeof opt.needleCol&&(opt.needleCol="#0099CC");var defaultFonts='"Helvetica Neue", Helvetica, Arial, sans-serif';"undefined"==typeof opt.tickFont&&(opt.tickFont=defaultFonts),"undefined"==typeof opt.unitsFont&&(opt.unitsFont=defaultFonts),opt.padding=opt.padding*opt.gaugeRadius,opt.edgeWidth=opt.edgeWidth*opt.gaugeRadius,opt.tickEdgeGap=opt.tickEdgeGap*opt.gaugeRadius,opt.tickLengthMaj=opt.tickLengthMaj*opt.gaugeRadius,opt.tickLengthMin=opt.tickLengthMin*opt.gaugeRadius,opt.needleTickGap=opt.needleTickGap*opt.gaugeRadius,opt.needleLengthNeg=opt.needleLengthNeg*opt.gaugeRadius,opt.pivotRadius=opt.pivotRadius*opt.gaugeRadius,opt.needleWidth=opt.needleWidth*(opt.gaugeRadius/opt.ticknessGaugeBasis),opt.tickWidthMaj=opt.tickWidthMaj*(opt.gaugeRadius/opt.ticknessGaugeBasis),opt.tickWidthMin=opt.tickWidthMin*(opt.gaugeRadius/opt.ticknessGaugeBasis),opt.labelFontSize=opt.labelFontSize*(opt.gaugeRadius/opt.ticknessGaugeBasis);var needleLengthPos=opt.gaugeRadius-opt.padding-opt.edgeWidth-opt.tickEdgeGap-opt.tickLengthMaj-opt.needleTickGap,needlePathLength=opt.needleLengthNeg+needleLengthPos,needlePathStart=opt.needleLengthNeg*-1,tickStartMaj=opt.gaugeRadius-opt.padding-opt.edgeWidth-opt.tickEdgeGap-opt.tickLengthMaj,tickStartMin=opt.gaugeRadius-opt.padding-opt.edgeWidth-opt.tickEdgeGap-opt.tickLengthMin,labelStart=tickStartMaj-opt.labelFontSize,innerEdgeRadius=opt.gaugeRadius-opt.padding-opt.edgeWidth,outerEdgeRadius=opt.gaugeRadius-opt.padding,originX=opt.gaugeRadius,originY=opt.gaugeRadius;opt.labelFontSize<6&&(opt.labelFontSize=0);for(var valueScale=d3.scaleLinear().domain([opt.minVal,opt.maxVal]).range([opt.zeroTickAngle,opt.maxTickAngle]),counter=0,tickAnglesMaj=[],tickAnglesMin=[],tickSpacingMajDeg=valueScale(opt.tickSpaceMajVal)-valueScale(0),tickSpacingMinDeg=valueScale(opt.tickSpaceMinVal)-valueScale(0),i=opt.zeroTickAngle;i<=opt.maxTickAngle;i+=tickSpacingMajDeg)tickAnglesMaj.push(opt.zeroTickAngle+tickSpacingMajDeg*counter),counter++;counter=0;for(var i=opt.zeroTickAngle;i<=opt.maxTickAngle;i+=tickSpacingMinDeg){var exists=0;tickAnglesMaj.forEach(function(d){opt.zeroTickAngle+tickSpacingMinDeg*counter==d&&(exists=1)}),0==exists&&tickAnglesMin.push(opt.zeroTickAngle+tickSpacingMinDeg*counter),counter++}counter=0;for(var tickLabelText=[],i=opt.zeroTickAngle;i<=opt.maxTickAngle;i+=tickSpacingMajDeg)tickLabelText.push(opt.minVal+opt.tickSpaceMajVal*counter),counter++;var svgWidth=2*opt.gaugeRadius,svgHeight=2*opt.gaugeRadius,svg=d3.select(element).append("svg").attr("id","SVGbox-"+opt.divID).attr("width",svgWidth).attr("height",svgHeight),circleGroup=svg.append("svg:g").attr("id","circles"),tickCalcMaj=(circleGroup.append("svg:circle").attr("cx",originX).attr("cy",originY).attr("r",outerEdgeRadius).style("fill",opt.outerEdgeCol).style("stroke","none"),circleGroup.append("svg:circle").attr("cx",originX).attr("cy",originY).attr("r",innerEdgeRadius).style("fill",opt.innerCol).style("stroke","none"),circleGroup.append("svg:circle").attr("cx",originX).attr("cy",originY).attr("r",opt.pivotRadius).style("fill",opt.pivotCol).style("stroke","none"),function(){function pathCalc(d,i){var tickAngle=d+90,tickAngleRad=dToR(tickAngle),y1=originY+tickStartMaj*Math.sin(tickAngleRad),y2=originY+(tickStartMaj+opt.tickLengthMaj)*Math.sin(tickAngleRad),x1=originX+tickStartMaj*Math.cos(tickAngleRad),x2=originX+(tickStartMaj+opt.tickLengthMaj)*Math.cos(tickAngleRad),lineData=[{x:x1,y:y1},{x:x2,y:y2}],lineFunc=d3.line().x(function(d){return d.x}).y(function(d){return d.y}),lineSVG=lineFunc(lineData);return lineSVG}return pathCalc}),tickCalcMin=function(){function pathCalc(d,i){var tickAngle=d+90,tickAngleRad=dToR(tickAngle),y1=originY+tickStartMin*Math.sin(tickAngleRad),y2=originY+(tickStartMin+opt.tickLengthMin)*Math.sin(tickAngleRad),x1=originX+tickStartMin*Math.cos(tickAngleRad),x2=originX+(tickStartMin+opt.tickLengthMin)*Math.cos(tickAngleRad),lineData=[{x:x1,y:y1},{x:x2,y:y2}],lineFunc=d3.line().x(function(d){return d.x}).y(function(d){return d.y}),lineSVG=lineFunc(lineData);return lineSVG}return pathCalc},pathTickMaj=tickCalcMaj(),pathTickMin=tickCalcMin(),ticks=svg.append("svg:g").attr("id","tickMarks"),ticksMin=ticks.append("svg:g").attr("id","minorTickMarks"),ticksMaj=ticks.append("svg:g").attr("id","majorTickMarks"),tickLabels=(ticksMin.selectAll("path").data(tickAnglesMin).enter().append("path").attr("d",pathTickMin).style("stroke",opt.tickColMin).style("stroke-width",opt.tickWidthMin+"px"),ticksMaj.selectAll("path").data(tickAnglesMaj).enter().append("path").attr("d",pathTickMaj).style("stroke",opt.tickColMaj).style("stroke-width",opt.tickWidthMaj+"px"),svg.append("svg:g").attr("id","tickLabels")),unitLabels=(tickLabels.selectAll("text").data(tickAnglesMaj).enter().append("text").attr("x",function(d,i){return labelXcalc(d,i)}).attr("y",function(d,i){return labelYcalc(d,i)}).attr("font-size",opt.labelFontSize).attr("text-anchor","middle").style("fill",opt.tickLabelCol).style("font-weight","bold").attr("font-family",opt.tickFont).text(function(d,i){return tickLabelText[i]}),svg.append("svg:g").attr("id","unitLabels")),unitsLabel=unitLabels.selectAll("text").data([0]).enter().append("text").attr("x",function(d,i){return labelXcalc(d,i)}).attr("y",function(d,i){return labelYcalc(d,i)}).attr("font-size",1.5*opt.labelFontSize).attr("text-anchor","middle").style("fill",opt.unitsLabelCol).style("font-weight","bold").attr("font-family",opt.unitsFont).text(opt.gaugeUnits),needleAngle=[opt.zeroNeedleAngle],needleCalc=function(){function pathCalc(d,i){var nAngleRad=dToR(d+90),y1=originY+needlePathStart*Math.sin(nAngleRad),y2=originY+(needlePathStart+needlePathLength)*Math.sin(nAngleRad),x1=originX+needlePathStart*Math.cos(nAngleRad),x2=originX+(needlePathStart+needlePathLength)*Math.cos(nAngleRad),lineData=[{x:x1,y:y1},{x:x2,y:y2}],lineFunc=d3.line().x(function(d){return d.x}).y(function(d){return d.y}),lineSVG=lineFunc(lineData);return lineSVG}return pathCalc},pathNeedle=needleCalc(),needleGroup=svg.append("svg:g").attr("id","needle"),needlePath=needleGroup.selectAll("path").data(needleAngle).enter().append("path").attr("d",pathNeedle).style("stroke",opt.needleCol).style("stroke-width",opt.needleWidth+"px");needlePath.transition().duration(1e3).attrTween("transform",function(d,i,a){needleAngle=valueScale(opt.needleVal),needleAngle>opt.maxTickAngle&&(needleAngle=opt.maxNeedleAngle),needleAngle<opt.zeroTickAngle&&(needleAngle=opt.zeroNeedleAngle);var needleCentre=originX+","+originY,needleRot=needleAngle-opt.zeroNeedleAngle;return d3.interpolateString("rotate(0,"+needleCentre+")","rotate("+needleRot+","+needleCentre+")")}),unitsLabel.transition().duration(1e3).tween("text",function(d){var i=d3.interpolateString(opt.minVal,opt.needleVal),self=this;return function(t){self.textContent=Math.round(i(t))+" "+opt.gaugeUnits}}),this.updateGauge=function(newVal){void 0==newVal&&opt.minVal;var needlePath=needleGroup.selectAll("path"),oldVal=opt.needleVal;needlePath.transition().duration(3e3).ease(d3.easeCubicIn).attrTween("transform",function(d,i,a){var needleAngleOld=valueScale(oldVal)-opt.zeroNeedleAngle,needleAngleNew=valueScale(newVal)-opt.zeroNeedleAngle;needleAngleOld+opt.zeroNeedleAngle>opt.maxTickAngle&&(needleAngleOld=opt.maxNeedleAngle-opt.zeroNeedleAngle),needleAngleOld+opt.zeroNeedleAngle<opt.zeroTickAngle&&(needleAngleOld=0),needleAngleNew+opt.zeroNeedleAngle>opt.maxTickAngle&&(needleAngleNew=opt.maxNeedleAngle-opt.zeroNeedleAngle),needleAngleNew+opt.zeroNeedleAngle<opt.zeroTickAngle&&(needleAngleNew=0);var needleCentre=originX+","+originY;return d3.interpolateString("rotate("+needleAngleOld+","+needleCentre+")","rotate("+needleAngleNew+","+needleCentre+")")}),unitsLabel.transition().duration(3e3).ease(d3.easeCubicIn).tween("text",function(d){var i=d3.interpolateString(oldVal,newVal),self=this;return function(t){self.textContent=Math.round(i(t))+" "+opt.gaugeUnits}}),opt.needleVal=newVal}}function dToR(angleDeg){var angleRad=angleDeg*(Math.PI/180);return angleRad}return drawGauge}(d3),gauge=new meterGauge(config);scope.$watch("gaugeconfig.needleVal",function(newVal){gauge.updateGauge(newVal)})};exports.default=meterGaugeComponentLink},{}]},{},[4]);